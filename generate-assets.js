
/*
âœ… CÃ¡ch dÃ¹ng
1ï¸âƒ£ Äáº·t file generate-assets.js á»Ÿ gá»‘c dá»± Ã¡n.
2ï¸âƒ£ Cháº¡y:
node generate-assets.js
3ï¸âƒ£ Má»—i láº§n thÃªm/xÃ³a áº£nh/icon â†’ cháº¡y láº¡i!
ðŸ‘‰ Assets.js sáº½ tá»± update.
*/
const fs = require('fs');
const path = require('path');

// ThÆ° má»¥c gá»‘c chá»©a images & icons
const ASSETS_DIR = path.resolve(__dirname, 'assets');
const OUTPUT_FILE = path.resolve(__dirname, 'src/utils/Assets.js');

// Helper: Táº¡o key chuáº©n camelCase
const toCamelCase = (str) =>
  str.replace(/[-_](.)/g, (_, c) => c.toUpperCase()).replace(/\.[^/.]+$/, '');

const scanDir = (subdir) => {
  const dir = path.join(ASSETS_DIR, subdir);
  if (!fs.existsSync(dir)) return {};

  const files = fs.readdirSync(dir);
  const result = {};

  files.forEach((file) => {
    const ext = path.extname(file).toLowerCase();
    if (!['.png', '.jpg', '.jpeg', '.svg'].includes(ext)) return;

    const key = toCamelCase(path.basename(file, ext));
    const relativePath = `../../assets/${subdir}/${file}`;
    result[key] = `require('${relativePath}')`;
  });

  return result;
};

// Táº¡o object cho Images & Icons
const images = scanDir('images');
const icons = scanDir('icons');

// Táº¡o file output
const output = `
// ðŸš€ Generated by cmd 'node generate-assets.js' â€” DO NOT EDIT MANUALLY!
const Images = {
${Object.entries(images).map(([k, v]) => `  ${k}: ${v},`).join('\n')}
};

const Icons = {
${Object.entries(icons).map(([k, v]) => `  ${k}: ${v},`).join('\n')}
};

export default {
  Images,
  Icons,
};
`;

fs.mkdirSync(path.dirname(OUTPUT_FILE), { recursive: true });
fs.writeFileSync(OUTPUT_FILE, output);

console.log(`âœ… Assets.js generated with ${Object.keys(images).length} images & ${Object.keys(icons).length} icons!`);
